<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>KenzoVerse Games</title>
<style>
body { font-family:'Segoe UI',sans-serif; background:linear-gradient(135deg,#1a1a1a,#333); color:#fff; display:flex; justify-content:center; align-items:center; min-height:100vh; margin:0; overflow:auto; }
.container { text-align:center; width:100%; max-width:600px; margin:20px auto; }
h1 { font-size:2.5rem; text-shadow:0 0 10px #ff0077,0 0 20px #00ffff; }
button { padding:12px 24px; margin:5px; font-size:1rem; cursor:pointer; border-radius:8px; border:none; background:#222; color:#fff; box-shadow:0 0 5px #ff0077,0 0 10px #00ffff; transition:0.2s; }
button:hover { transform:scale(1.1); box-shadow:0 0 15px #ff0077,0 0 25px #00ffff; }
.hidden { display:none; }
.board { display:grid; grid-template-columns:repeat(3,100px); grid-gap:10px; justify-content:center; margin:20px auto; }
.cell { width:100px; height:100px; background:#111; display:flex; justify-content:center; align-items:center; font-size:2.5rem; cursor:pointer; border:2px solid #444; transition:0.3s; }
.cell:hover { background:#222; box-shadow:0 0 15px #ff0077,0 0 25px #00ffff; }
.cell.winner { color:#ff0; }
.status { margin-top:15px; font-size:1.3rem; text-shadow:0 0 5px #ff0077,0 0 10px #00ffff; }
canvas { display:block; margin:20px auto; background:#111; border:2px solid #444; }
input[type=number]{ padding:8px; border-radius:6px; border:none; width:100px; font-size:1rem; text-align:center; margin-right:10px; }
</style>
</head>
<body>

<!-- Main Menu -->
<div class="container" id="mainMenu">
  <h1>KenzoVerse Games</h1>
  <button id="playTic">Tic‑Tac‑Toe</button>
  <button id="playDino">Dino Jump</button>
  <button id="playChess">Chess</button>
  <button id="playMath">Math Game</button>
</div>

<!-- Tic‑Tac‑Toe Mode -->
<div class="container hidden" id="ticMode">
  <h1>Tic‑Tac‑Toe Mode</h1>
  <button id="ticPlayerBtn">2 Player</button>
  <button id="ticAIBtn">vs AI</button>
  <button id="backTicMode">Back</button>
</div>

<!-- Tic‑Tac‑Toe Game -->
<div class="container hidden" id="ticTacToe">
  <h1>Tic‑Tac‑Toe</h1>
  <div class="board" id="board"></div>
  <div class="status" id="ticStatus"></div>
  <button id="ticRestart">Restart</button>
  <button id="backToMain1">Back to Menu</button>
</div>

<!-- Dino Jump -->
<div class="container hidden" id="dinoGame">
  <h1>Dino Jump</h1>
  <canvas id="dinoCanvas" width="600" height="200"></canvas>
  <div class="status" id="dinoStatus">Score: 0</div>
  <button id="restartDino">Restart Dino</button>
  <button id="backDino">Back to Menu</button>
</div>

<!-- Chess -->
<div class="container hidden" id="chessGame">
  <h1>Chess</h1>
  <canvas id="chessCanvas" width="400" height="400"></canvas>
  <div class="status" id="chessStatus">Turn: White</div>
  <button id="mode2Player">2 Player</button>
  <button id="modeAI">Play vs AI</button>
  <button id="backChess">Back to Menu</button>
</div>

<!-- Math Level Selection -->
<div class="container hidden" id="mathMode">
  <h1>Math Game - Select Level</h1>
  <button id="mathEasyBtn">Easy</button>
  <button id="mathMediumBtn">Medium</button>
  <button id="mathHardBtn">Hard</button>
  <button id="backMathMode">Back</button>
</div>

<!-- Math Game -->
<div class="container hidden" id="mathGame">
  <h1>Math Game</h1>
  <div id="mathQuestion" class="status"></div>
  <input type="number" id="mathAnswer" placeholder="Answer">
  <button id="submitMath">Submit</button>
  <div class="status" id="mathScore">Score: 0</div>
  <button id="backMath">Back to Menu</button>
</div>

<script>

/* =======================
      NAVIGATION
======================= */
const mainMenu = document.getElementById('mainMenu');
const ticMode = document.getElementById('ticMode');
const ticTacToe = document.getElementById('ticTacToe');
const dinoGame = document.getElementById('dinoGame');
const chessMode = document.getElementById('chessMode');
const chessGame = document.getElementById('chessGame');
const mathGame = document.getElementById('mathGame');

document.getElementById('playTic').onclick = ()=>{
  mainMenu.classList.add('hidden');
  ticMode.classList.remove('hidden');
};
document.getElementById('playDino').onclick = ()=>{
  mainMenu.classList.add('hidden');
  dinoGame.classList.remove('hidden');
  startDino();
};
document.getElementById('playChess').onclick = ()=>{
  mainMenu.classList.add('hidden');
  chessMode.classList.remove('hidden');
};
document.getElementById('playMath').onclick = ()=>{
  mainMenu.classList.add('hidden');
  mathGame.classList.remove('hidden');
  startMath();
};

document.getElementById('backTicMode').onclick = ()=>{
  ticMode.classList.add('hidden');
  mainMenu.classList.remove('hidden');
};
document.getElementById('backToMain1').onclick = ()=>{
  ticTacToe.classList.add('hidden');
  mainMenu.classList.remove('hidden');
};
document.getElementById('backDino').onclick = ()=>{
  dinoGame.classList.add('hidden');
  mainMenu.classList.remove('hidden');
  clearInterval(dinoInterval);
};
document.getElementById('mode2Player').onclick = ()=>{
vsAI=false; initChess();
};
document.getElementById('modeAI').onclick = ()=>{
vsAI=true; initChess();
};
document.getElementById('backChess').onclick = ()=>{
document.getElementById('chessGame').classList.add('hidden');
document.getElementById('mainMenu').classList.remove('hidden');
};
document.getElementById('backMath').onclick = ()=>{
  mathGame.classList.add('hidden');
  mainMenu.classList.remove('hidden');
};

/* =======================
      TIC‑TAC‑TOE
======================= */
const boardEl = document.getElementById('board');
const ticStatus = document.getElementById('ticStatus');
const ticRestart = document.getElementById('ticRestart');

let ticBoard = [];
let ticCurrent = "X";
let ticGameOver = false;
let ticAI = false;

function startTic(){
  ticBoard = ["","","","","","","","",""];
  ticCurrent="X";
  ticGameOver=false;
  boardEl.innerHTML="";
  ticStatus.textContent = `Turn: ${ticCurrent}`;
  for(let i=0;i<9;i++){
    const c = document.createElement('div');
    c.classList.add('cell');
    c.dataset.index=i;
    c.addEventListener('click', ticClick);
    boardEl.appendChild(c);
  }
}

function ticClick(e){
  const idx = +e.target.dataset.index;
  if(ticGameOver||ticBoard[idx]!="") return;

  ticBoard[idx]=ticCurrent;
  e.target.textContent=ticCurrent;
  if(ticCheckWin(ticCurrent)){
    ticStatus.textContent = `${ticCurrent} Wins!`;
    ticGameOver=true; return;
  }
  if(ticBoard.every(v=>v!="")){
    ticStatus.textContent="Draw!";
    ticGameOver=true; return;
  }

  ticCurrent = ticCurrent==="X"?"O":"X";
  ticStatus.textContent = `Turn: ${ticCurrent}`;

  if(ticAI && ticCurrent==="O"){
    setTimeout(ticAIMove,300);
  }
}

function ticCheckWin(p){
  return [[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]]
         .some(c=>c.every(i=>ticBoard[i]===p));
}
function ticAIMove(){
  const empty = ticBoard.map((v,i)=>v===""?i:null).filter(v=>v!==null);
  if(empty.length===0) return;
  const pick = empty[Math.floor(Math.random()*empty.length)];
  ticBoard[pick]="O";
  boardEl.children[pick].textContent="O";
  if(ticCheckWin("O")){ ticStatus.textContent="O Wins!"; ticGameOver=true; return; }
  ticCurrent="X";
  ticStatus.textContent = `Turn: ${ticCurrent}`;
}

document.getElementById('ticPlayerBtn').onclick = ()=>{
  ticAI=false;
  ticMode.classList.add('hidden');
  ticTacToe.classList.remove('hidden');
  startTic();
};
document.getElementById('ticAIBtn').onclick = ()=>{
  ticAI=true;
  ticMode.classList.add('hidden');
  ticTacToe.classList.remove('hidden');
  startTic();
};
ticRestart.onclick = ()=> startTic();

/* =======================
      DINO JUMP
======================= */
// ===== Dino Jump (HP Friendly) =====
const dinoCanvas = document.getElementById('dinoCanvas'); 
const dCtx = dinoCanvas.getContext('2d');
let dinoInterval;
let dino = {x:50,y:150,w:40,h:40,vy:0,jump:false};
let obstacles = []; 
let dinoScore = 0; 
let gravity = 0.6; 
let speed = 4;

// Tap/click untuk lompat
dinoCanvas.addEventListener('click', () => {
  if(!dino.jump){
    dino.vy = -12;
    dino.jump = true;
  }
});

// Opsional: key listener tetap bisa
document.addEventListener('keydown', (e)=>{
  if(e.code==='Space' && !dino.jump){
    dino.vy = -12;
    dino.jump = true;
  }
});

function startDino(){
  dino={x:50,y:150,w:40,h:40,vy:0,jump:false}; 
  obstacles=[]; 
  dinoScore=0;
  document.getElementById('dinoStatus').textContent=`Score: ${dinoScore}`;
  clearInterval(dinoInterval); 
  dinoInterval=setInterval(updateDino,20);
}

function updateDino(){
  dino.y += dino.vy; 
  dino.vy += gravity;
  if(dino.y > 150){ 
    dino.y = 150; 
    dino.vy = 0; 
    dino.jump = false; 
  }

  if(obstacles.length===0 || obstacles[obstacles.length-1].x<400){ 
    obstacles.push({x:600,y:150,w:20,h:40}); 
  }
  obstacles.forEach(o=>o.x -= speed);
  if(obstacles[0].x + obstacles[0].w <0) obstacles.shift();

  obstacles.forEach(o=>{
    if(dino.x<o.x+o.w && dino.x+dino.w>o.x && dino.y<o.y+o.h && dino.y+dino.h>o.y){
      alert('Game Over! Score: '+dinoScore);
      clearInterval(dinoInterval);
    }
  });

  dinoScore++; 
  document.getElementById('dinoStatus').textContent=`Score: ${dinoScore}`;
  drawDino();
}

function drawDino(){
  dCtx.clearRect(0,0,dinoCanvas.width,dinoCanvas.height);
  dCtx.fillStyle='green'; dCtx.fillRect(dino.x,dino.y,dino.w,dino.h);
  dCtx.fillStyle='red'; obstacles.forEach(o=>dCtx.fillRect(o.x,o.y,o.w,o.h));
}

document.getElementById('restartDino').onclick=startDino;

/* =======================
      CHESS vs AI
======================= */
const chessCanvasEl = document.getElementById('chessCanvas');
const cCtx = chessCanvasEl.getContext('2d');
const chessStatusEl = document.getElementById('chessStatus');
const size = 50;

let chessBoard = [];
let selectedChess = null;
let turnChess = 'white';
let vsAI = false;

const pieceSymbols = { 'P':'♙','R':'♖','N':'♘','B':'♗','Q':'♕','K':'♔' };

function initChess(){
  chessBoard = Array(8).fill(null).map(()=>Array(8).fill(null));
  for(let i=0;i<8;i++){ chessBoard[1][i]='bP'; chessBoard[6][i]='wP'; }
  chessBoard[0][0]=chessBoard[0][7]='bR'; chessBoard[7][0]=chessBoard[7][7]='wR';
  chessBoard[0][1]=chessBoard[0][6]='bN'; chessBoard[7][1]=chessBoard[7][6]='wN';
  chessBoard[0][2]=chessBoard[0][5]='bB'; chessBoard[7][2]=chessBoard[7][5]='wB';
  chessBoard[0][3]='bQ'; chessBoard[7][3]='wQ';
  chessBoard[0][4]='bK'; chessBoard[7][4]='wK';
  turnChess='white';
  selectedChess=null;
  drawChess();
}

function drawChess(){
  cCtx.clearRect(0,0,chessCanvasEl.width,chessCanvasEl.height);
  for(let y=0;y<8;y++){
    for(let x=0;x<8;x++){
      cCtx.fillStyle=(x+y)%2===0?'#eee':'#555';
      cCtx.fillRect(x*size,y*size,size,size);

      if(selectedChess && selectedChess.x===x && selectedChess.y===y){
        cCtx.fillStyle='rgba(0,255,0,0.4)';
        cCtx.fillRect(x*size,y*size,size,size);
      }

      if(chessBoard[y][x]){
        cCtx.fillStyle=chessBoard[y][x][0]==='w'?'white':'black';
        cCtx.font='30px Arial';
        cCtx.textAlign='center';
        cCtx.textBaseline='middle';
        cCtx.fillText(pieceSymbols[chessBoard[y][x][1]], x*size+size/2, y*size+size/2);
      }
    }
  }
  chessStatusEl.textContent = `Turn: ${turnChess.charAt(0).toUpperCase()+turnChess.slice(1)}`;
}

function inBoard(x,y){ return x>=0 && x<8 && y>=0 && y<8; }

// Returns array of moves {x,y} for a piece at x,y
function getChessMoves(x,y){
  const piece = chessBoard[y][x];
  if(!piece) return [];
  const color = piece[0], type = piece[1];
  const moves=[];

  if(type==='P'){
    const dir=color==='w'?-1:1;
    if(inBoard(x,y+dir) && !chessBoard[y+dir][x]) moves.push({x,y:y+dir});
    if((y===1 && color==='b') || (y===6 && color==='w')){
      if(inBoard(x,y+2*dir) && !chessBoard[y+dir][x] && !chessBoard[y+2*dir][x]) moves.push({x,y:y+2*dir});
    }
    [[-1,dir],[1,dir]].forEach(d=>{
      const nx=x+d[0], ny=y+d[1];
      if(inBoard(nx,ny) && chessBoard[ny][nx] && chessBoard[ny][nx][0]!==color) moves.push({x:nx,y:ny});
    });
  }

  if(type==='R' || type==='Q'){
    [[1,0],[-1,0],[0,1],[0,-1]].forEach(d=>{
      let nx=x+d[0], ny=y+d[1];
      while(inBoard(nx,ny)){
        if(!chessBoard[ny][nx]) moves.push({x:nx,y:ny});
        else{ if(chessBoard[ny][nx][0]!==color) moves.push({x:nx,y:ny}); break; }
        nx+=d[0]; ny+=d[1];
      }
    });
  }

  if(type==='B' || type==='Q'){
    [[1,1],[1,-1],[-1,1],[-1,-1]].forEach(d=>{
      let nx=x+d[0], ny=y+d[1];
      while(inBoard(nx,ny)){
        if(!chessBoard[ny][nx]) moves.push({x:nx,y:ny});
        else{ if(chessBoard[ny][nx][0]!==color) moves.push({x:nx,y:ny}); break; }
        nx+=d[0]; ny+=d[1];
      }
    });
  }

  if(type==='N'){
    [[2,1],[1,2],[-1,2],[-2,1],[-2,-1],[-1,-2],[1,-2],[2,-1]].forEach(d=>{
      const nx=x+d[0], ny=y+d[1]; if(inBoard(nx,ny) && (!chessBoard[ny][nx] || chessBoard[ny][nx][0]!==color)) moves.push({x:nx,y:ny});
    });
  }

  if(type==='K'){
    [[1,0],[-1,0],[0,1],[0,-1],[1,1],[1,-1],[-1,1],[-1,-1]].forEach(d=>{
      const nx=x+d[0], ny=y+d[1]; if(inBoard(nx,ny) && (!chessBoard[ny][nx] || chessBoard[ny][nx][0]!==color)) moves.push({x:nx,y:ny});
    });
  }

  return moves;
}

function aiChessMove(){
  const allMoves=[];
  for(let y=0;y<8;y++){
    for(let x=0;x<8;x++){
      if(chessBoard[y][x] && chessBoard[y][x][0]==='b'){
        const moves=getChessMoves(x,y);
        moves.forEach(m=>allMoves.push({from:{x,y},to:m}));
      }
    }
  }
  if(allMoves.length===0) return;
  const pick=allMoves[Math.floor(Math.random()*allMoves.length)];
  chessBoard[pick.to.y][pick.to.x]=chessBoard[pick.from.y][pick.from.x];
  chessBoard[pick.from.y][pick.from.x]=null;
  turnChess='white';
  drawChess();
}

chessCanvasEl.addEventListener('click',e=>{
  const x=Math.floor(e.offsetX/size), y=Math.floor(e.offsetY/size);
  const piece=chessBoard[y][x];

  if(vsAI && turnChess!=='white') return; // AI turn
  if(selectedChess){
    const legalMoves=getChessMoves(selectedChess.x,selectedChess.y);
    if(legalMoves.some(m=>m.x===x && m.y===y)){
      chessBoard[y][x]=chessBoard[selectedChess.y][selectedChess.x];
      chessBoard[selectedChess.y][selectedChess.x]=null;
      selectedChess=null;
      turnChess=turnChess==='white'?'black':'white';
      drawChess();
      if(vsAI && turnChess==='black') setTimeout(aiChessMove,400);
    } else { selectedChess=null; drawChess(); }
  } else if(piece && piece[0]===turnChess[0]){
    selectedChess={x,y};
    drawChess();
  }
});

// Buttons
document.getElementById('mode2Player').onclick = ()=>{
  vsAI=false; initChess();
};
document.getElementById('modeAI').onclick = ()=>{
  vsAI=true; initChess();
};
document.getElementById('backChess').onclick = ()=>{
  document.getElementById('chessGame').classList.add('hidden');
  document.getElementById('mainMenu').classList.remove('hidden');
};

/* =======================
      MATH GAME LEVEL
======================= */
let mathScore=0, currentAnswer=0;
let mathLevel='Easy'; // default

// Pilih level
document.getElementById('playMath').onclick = ()=>{
  mainMenu.classList.add('hidden');
  mathMode.classList.remove('hidden');
};
document.getElementById('backMathMode').onclick = ()=>{
  mathMode.classList.add('hidden');
  mainMenu.classList.remove('hidden');
};

document.getElementById('mathEasyBtn').onclick = ()=>{
  mathLevel='Easy'; mathMode.classList.add('hidden'); mathGame.classList.remove('hidden'); startMath();
};
document.getElementById('mathMediumBtn').onclick = ()=>{
  mathLevel='Medium'; mathMode.classList.add('hidden'); mathGame.classList.remove('hidden'); startMath();
};
document.getElementById('mathHardBtn').onclick = ()=>{
  mathLevel='Hard'; mathMode.classList.add('hidden'); mathGame.classList.remove('hidden'); startMath();
};

function startMath(){ 
  mathScore=0; 
  document.getElementById('mathScore').textContent=`Score: ${mathScore}`; 
  nextQuestion(); 
}

function nextQuestion(){
  let a,b,ops,op;
  if(mathLevel==='Easy'){
    a=Math.floor(Math.random()*20+1);
    b=Math.floor(Math.random()*20+1);
    ops=['+','-'];
  } else if(mathLevel==='Medium'){
    a=Math.floor(Math.random()*50+1);
    b=Math.floor(Math.random()*50+1);
    ops=['+','-','*'];
  } else if(mathLevel==='Hard'){
    a=Math.floor(Math.random()*100+1);
    b=Math.floor(Math.random()*100+1);
    ops=['+','-','*','/'];
  }
  op=ops[Math.floor(Math.random()*ops.length)];
  if(op==='/'){ b=Math.floor(Math.random()*10+1); a=b*Math.floor(Math.random()*10+1); } // agar hasil integer
  currentAnswer=op==='+'?a+b: op==='-'?a-b: op==='*'?a*b:Math.floor(a/b);
  document.getElementById('mathQuestion').textContent=`Solve: ${a} ${op} ${b}`;
  document.getElementById('mathAnswer').value='';
}

document.getElementById('submitMath').onclick=()=>{
  const ans=parseInt(document.getElementById('mathAnswer').value);
  if(ans===currentAnswer){ mathScore++; }
  nextQuestion();
  document.getElementById('mathScore').textContent=`Score: ${mathScore}`;
};
</script>
</body>
</html>
